<!DOCTYPE html>

<html lang="ja">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>æ—¥ä»˜ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼</title>

    <style>

        body {

            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;

            max-width: 600px;

            margin: 0 auto;

            padding: 20px;

            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

            min-height: 100vh;

        }



        .container {

            background: white;

            border-radius: 15px;

            padding: 30px;

            box-shadow: 0 10px 30px rgba(0,0,0,0.2);

        }



        h1 {

            text-align: center;

            color: #333;

            margin-bottom: 30px;

            font-size: 2.2em;

        }



        .form-group {

            margin-bottom: 20px;

        }



        label {

            display: block;

            margin-bottom: 8px;

            color: #555;

            font-weight: bold;

        }



        input[type="text"], input[type="date"], select {

            width: 100%;

            padding: 12px;

            border: 2px solid #ddd;

            border-radius: 8px;

            font-size: 16px;

            box-sizing: border-box;

            transition: border-color 0.3s;

        }



        input[type="text"]:focus, input[type="date"]:focus, select:focus {

            outline: none;

            border-color: #667eea;

        }



        button {

            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

            color: white;

            border: none;

            padding: 12px 24px;

            border-radius: 8px;

            cursor: pointer;

            font-size: 16px;

            font-weight: bold;

            transition: transform 0.2s;

        }



        button:hover {

            transform: translateY(-2px);

        }



        .counter-list {

            margin-top: 30px;

        }



        .counter-item {

            background: #f8f9fa;

            border: 2px solid #e9ecef;

            border-radius: 10px;

            padding: 20px;

            margin-bottom: 15px;

            position: relative;

        }



        .counter-name {

            font-size: 1.3em;

            font-weight: bold;

            color: #333;

            margin-bottom: 10px;

        }



        .counter-value {

            font-size: 2em;

            font-weight: bold;

            text-align: center;

            padding: 15px;

            border-radius: 8px;

            margin: 10px 0;

        }



        .countup {

            background: linear-gradient(135deg, #56ab2f 0%, #a8e6cf 100%);

            color: white;

        }



        .countdown {

            background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);

            color: white;

        }



        .completed {

            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

            color: white;

        }



        .counter-info {

            text-align: center;

            color: #666;

            font-size: 0.9em;

            margin-top: 8px;

        }



        .delete-btn {

            position: absolute;

            top: 10px;

            right: 10px;

            background: #ff6b6b;

            color: white;

            border: none;

            border-radius: 50%;

            width: 30px;

            height: 30px;

            cursor: pointer;

            font-size: 16px;

        }



        .no-counters {

            text-align: center;

            color: #888;

            font-style: italic;

            margin-top: 30px;

        }



        .add-counter-form {

            border: 2px dashed #ddd;

            border-radius: 10px;

            padding: 20px;

            margin-bottom: 20px;

        }

    </style>

</head>

<body>

    <div class="container">

        <h1>ğŸ“… æ—¥ä»˜ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼</h1>

        

        <div class="add-counter-form">

            <div class="form-group">

                <label for="counterName">ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼å:</label>

                <input type="text" id="counterName" placeholder="ä¾‹: ç¦ç…™ç”Ÿæ´»ã€è©¦é¨“ã¾ã§ã€ç­‹ãƒˆãƒ¬é–‹å§‹ã‹ã‚‰">

            </div>

            

            <div class="form-group">

                <label for="counterDate">æ—¥ä»˜:</label>

                <input type="date" id="counterDate">

            </div>

            

            <div class="form-group">

                <label for="counterType">ç¨®é¡:</label>

                <select id="counterType">

                    <option value="countup">ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ï¼ˆâ—‹â—‹æ—¥çµŒéï¼‰</option>

                    <option value="countdown">ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ï¼ˆã‚ã¨â—‹â—‹æ—¥ï¼‰</option>

                </select>

            </div>

            

            <button onclick="addCounter()">â• ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼è¿½åŠ </button>

        </div>

        

        <div class="counter-list" id="counterList">

            <div class="no-counters">ã¾ã ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ãŒã‚ã‚Šã¾ã›ã‚“</div>

        </div>

    </div>



    <script>

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’è¡¨ç¤º

        window.onload = function() {

            displayCounters();

            // ä»Šæ—¥ã®æ—¥ä»˜ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«è¨­å®š

            document.getElementById('counterDate').value = new Date().toISOString().split('T')[0];

        };



        // ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼è¿½åŠ 

        function addCounter() {

            const name = document.getElementById('counterName').value.trim();

            const date = document.getElementById('counterDate').value;

            const type = document.getElementById('counterType').value;

            

            if (!name || !date) {

                alert('ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼åã¨æ—¥ä»˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');

                return;

            }

            

            const counter = {

                id: Date.now(), // ãƒ¦ãƒ‹ãƒ¼ã‚¯ID

                name: name,

                date: date,

                type: type,

                created: new Date().toISOString()

            };

            

            // æ—¢å­˜ã®ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’å–å¾—

            const counters = getCounters();

            counters.push(counter);

            

            // localStorageã«ä¿å­˜

            localStorage.setItem('dateCounters', JSON.stringify(counters));

            

            // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆ

            document.getElementById('counterName').value = '';

            document.getElementById('counterDate').value = new Date().toISOString().split('T')[0];

            

            // è¡¨ç¤ºã‚’æ›´æ–°

            displayCounters();

        }



        // ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼å‰Šé™¤

        function deleteCounter(id) {

            if (confirm('ã“ã®ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {

                const counters = getCounters();

                const filtered = counters.filter(counter => counter.id !== id);

                localStorage.setItem('dateCounters', JSON.stringify(filtered));

                displayCounters();

            }

        }



        // localStorageã‹ã‚‰ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’å–å¾—

        function getCounters() {

            const saved = localStorage.getItem('dateCounters');

            return saved ? JSON.parse(saved) : [];

        }



        // æ—¥æ•°è¨ˆç®—

        function calculateDays(targetDate, type) {

            const today = new Date();

            const target = new Date(targetDate);

            

            // æ™‚é–“ã‚’0ã«ã—ã¦æ—¥ä»˜ã®ã¿ã§æ¯”è¼ƒ

            today.setHours(0, 0, 0, 0);

            target.setHours(0, 0, 0, 0);

            

            const diffTime = today - target;

            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));

            

            if (type === 'countup') {

                return diffDays;

            } else {

                return -diffDays;

            }

        }



        // ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼è¡¨ç¤º

        function displayCounters() {

            const counters = getCounters();

            const listElement = document.getElementById('counterList');

            

            if (counters.length === 0) {

                listElement.innerHTML = '<div class="no-counters">ã¾ã ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ãŒã‚ã‚Šã¾ã›ã‚“</div>';

                return;

            }

            

            let html = '';

            

            counters.forEach(counter => {

                const days = calculateDays(counter.date, counter.type);

                let displayText, className, statusText;

                

                if (counter.type === 'countup') {

                    displayText = `${days}æ—¥çµŒé`;

                    className = 'countup';

                    statusText = `é–‹å§‹æ—¥: ${counter.date}`;

                } else {

                    if (days > 0) {

                        displayText = `ã‚ã¨${days}æ—¥`;

                        className = 'countdown';

                    } else if (days === 0) {

                        displayText = 'ä»Šæ—¥ï¼';

                        className = 'completed';

                    } else {

                        displayText = `${Math.abs(days)}æ—¥çµŒé`;

                        className = 'completed';

                    }

                    statusText = `ç›®æ¨™æ—¥: ${counter.date}`;

                }

                

                html += `

                    <div class="counter-item">

                        <button class="delete-btn" onclick="deleteCounter(${counter.id})">Ã—</button>

                        <div class="counter-name">${counter.name}</div>

                        <div class="counter-value ${className}">${displayText}</div>

                        <div class="counter-info">${statusText}</div>

                    </div>

                `;

            });

            

            listElement.innerHTML = html;

        }



        // 1åˆ†ã”ã¨ã«è¡¨ç¤ºã‚’æ›´æ–°ï¼ˆæ—¥ä»˜ãŒå¤‰ã‚ã£ãŸæ™‚ã®ãŸã‚ï¼‰

        setInterval(displayCounters, 60000);

    </script>

</body>

</html>
